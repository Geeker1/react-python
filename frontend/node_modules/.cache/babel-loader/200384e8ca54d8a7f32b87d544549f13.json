{"ast":null,"code":"import _objectSpread from \"/home/devcode/Desktop/django-projects/Djang-React/react/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { LOGIN, LOGOUT, SIGNUP, AUTH_SUCCESS, LOGIN_ERROR, AUTH_ERROR, LOGIN_SUCCESSFUL } from '../actions/auth';\nvar initial = {\n  token: localStorage.getItem('token'),\n  isAuthenticated: null,\n  isLoading: true,\n  user: null,\n  errors: {}\n};\nexport default function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initial;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case LOGIN:\n      localStorage.setItem('token', action.payload.token);\n      var user = action.payload.user.username;\n      console.log(_objectSpread({}, state, {\n        isAuthenticated: true,\n        errors: {},\n        isLoading: false\n      }, action.payload)); // console.log({ ...state, isAuthenticated: true, isLoading: false, ...action.payload })\n\n      return _objectSpread({}, state, {\n        isAuthenticated: true,\n        errors: {},\n        isLoading: false\n      }, action.payload);\n\n    case LOGIN_ERROR:\n      console.log(action.payload);\n      return _objectSpread({}, state, {\n        isAuthenticated: false,\n        errors: action.payload\n      });\n\n    case AUTH_SUCCESS:\n      if (action.token == state.token) {\n        var _username = action.payload.data.username;\n        console.log(_username);\n        return _objectSpread({}, state, {\n          isAuthenticated: true,\n          user: _username,\n          isLoading: false\n        });\n      } else {\n        return _objectSpread({}, initial);\n      }\n\n    case SIGNUP:\n      localStorage.setItem('token', action.payload.token);\n      var username = action.payload.username;\n      console.log(_objectSpread({}, state, {\n        isAuthenticated: true,\n        user: user\n      }, action.payload, {\n        isLoading: false\n      }));\n      return _objectSpread({}, state, {\n        isAuthenticated: true,\n        user: user\n      }, action.payload, {\n        isLoading: false\n      });\n\n    case AUTH_ERROR:\n      console.log(action.payload);\n      console.log(_objectSpread({}, state, {\n        isAuthenticated: null,\n        isLoading: false,\n        user: false,\n        errors: action.payload\n      }));\n      return _objectSpread({}, state, {\n        isAuthenticated: null,\n        isLoading: false,\n        user: false,\n        errors: action.payload\n      });\n\n    case LOGOUT:\n      if (state.token) {\n        localStorage.removeItem('token');\n        console.log(_objectSpread({}, state, {\n          token: null,\n          user: null,\n          isAuthenticated: null\n        }));\n        return _objectSpread({}, state, {\n          token: null,\n          user: null,\n          isAuthenticated: null\n        });\n      }\n\n    default:\n      return state;\n  }\n} // case USER_LOADING:\n// \treturn { ...state, isLoading: true }\n// case USER_LOADED:\n// \treturn { ...state,\n// \t\tisAuthenticated: true,\n// \t\tisLoading: false,\n// \t\tuser: action.user }\n// case LOGIN_SUCCESSFUL:\n// \tlocalStorage.setItem('token', action.data.token)\n// \treturn {\n// \t\t...state,\n// \t\t...action.data,\n// \t\tisAuthenticated: true,\n// \t\tisLoading: false,\n// \t\terrors: null }\n// case LOGIN_FAILED:\n// case LOGOUT_SUCCESFUL:\n// \tlocalStorage.removeItem('token')\n// \treturn {\n// \t\t...state,\n// \t\terrors: action.data,\n// \t\ttoken: null,\n// \t\tuser: null,\n// \t\tisAuthenticated: false,\n// \t\tisLoading: false }","map":{"version":3,"sources":["/home/devcode/Desktop/django-projects/Djang-React/react/frontend/src/reducers/authenticate.js"],"names":["LOGIN","LOGOUT","SIGNUP","AUTH_SUCCESS","LOGIN_ERROR","AUTH_ERROR","LOGIN_SUCCESSFUL","initial","token","localStorage","getItem","isAuthenticated","isLoading","user","errors","state","action","type","setItem","payload","username","console","log","data","removeItem"],"mappings":"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","sourcesContent":["import { LOGIN, LOGOUT, SIGNUP, AUTH_SUCCESS, LOGIN_ERROR, AUTH_ERROR, LOGIN_SUCCESSFUL } from '../actions/auth'\nconst initial = {\n  token: localStorage.getItem('token'),\n  isAuthenticated: null,\n  isLoading: true,\n  user: null,\n  errors: {}\n}\n\nexport default function (state = initial, action) {\n  switch (action.type) {\n  \tcase LOGIN:\n  \t\tlocalStorage.setItem('token', action.payload.token)\n  \t\tconst user = action.payload.user.username\n  \t\tconsole.log({ ...state, isAuthenticated: true, errors: {}, isLoading: false, ...action.payload })\n  \t\t// console.log({ ...state, isAuthenticated: true, isLoading: false, ...action.payload })\n  \t\treturn { ...state, isAuthenticated: true, errors: {}, isLoading: false, ...action.payload }\n\n  \tcase LOGIN_ERROR:\n  \t\tconsole.log(action.payload)\n  \t\treturn { ...state, isAuthenticated: false, errors: action.payload }\n\n    case AUTH_SUCCESS:\n    \tif (action.token == state.token) {\n    \t\tconst { payload: { data: { username } } } = action\n    \t\tconsole.log(username)\n    \t\treturn { ...state, isAuthenticated: true, user: username, isLoading: false }\n    \t} else {\n    \t\treturn { ...initial }\n    \t}\n\n    case SIGNUP:\n    \tlocalStorage.setItem('token', action.payload.token)\n    \tconst username = action.payload.username\n    \tconsole.log({ ...state, isAuthenticated: true, user: user, ...action.payload, isLoading: false })\n    \treturn { ...state, isAuthenticated: true, user: user, ...action.payload, isLoading: false }\n\n    case AUTH_ERROR:\n      console.log(action.payload)\n      console.log({ ...state, isAuthenticated: null, isLoading: false, user: false, errors: action.payload })\n    \treturn { ...state, isAuthenticated: null, isLoading: false, user: false, errors: action.payload }\n\n    case LOGOUT:\n    \tif (state.token) {\n    \t\tlocalStorage.removeItem('token')\n    \t\tconsole.log({ ...state, token: null, user: null, isAuthenticated: null })\n    \treturn { ...state, token: null, user: null, isAuthenticated: null }\n      }\n\n    default:\n      return state\n  }\n}\n\n// case USER_LOADING:\n  \t// \treturn { ...state, isLoading: true }\n\n  \t// case USER_LOADED:\n  \t// \treturn { ...state,\n  \t// \t\tisAuthenticated: true,\n  \t// \t\tisLoading: false,\n  \t// \t\tuser: action.user }\n\n  \t// case LOGIN_SUCCESSFUL:\n  \t// \tlocalStorage.setItem('token', action.data.token)\n  \t// \treturn {\n  \t// \t\t...state,\n  \t// \t\t...action.data,\n  \t// \t\tisAuthenticated: true,\n  \t// \t\tisLoading: false,\n  \t// \t\terrors: null }\n\n  \t// case LOGIN_FAILED:\n  \t// case LOGOUT_SUCCESFUL:\n  \t// \tlocalStorage.removeItem('token')\n  \t// \treturn {\n  \t// \t\t...state,\n  \t// \t\terrors: action.data,\n  \t// \t\ttoken: null,\n  \t// \t\tuser: null,\n  \t// \t\tisAuthenticated: false,\n  \t// \t\tisLoading: false }\n"]},"metadata":{},"sourceType":"module"}